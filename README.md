def تجزیه_به_عوامل_اول(n):
    """
    این تابع یک عدد را گرفته و دیکشنری از عوامل اول آن به همراه توانشان برمی‌گرداند.
    مثال: برای ورودی 100، خروجی {2: 2, 5: 2} خواهد بود.
    """
    عوامل = {}
    عدد_باقیمانده = n
    # شروع تقسیم با اولین عدد اول یعنی ۲
    مقسوم_علیه = 2
    
    # ابتدا تمام فاکتورهای ۲ را جدا می‌کنیم
    while عدد_باقیمانده % مقسوم_علیه == 0:
        # اگر ۲ در دیکشنری نبود، آن را اضافه می‌کنیم، در غیر این صورت توانش را یکی بالا می‌بریم
        عوامل[مقسوم_علیه] = عوامل.get(مقسوم_علیه, 0) + 1
        عدد_باقیمانده //= مقسوم_علیه

    # حالا به سراغ اعداد فرد می‌رویم
    مقسوم_علیه = 3
    # حلقه تا زمانی ادامه پیدا می‌کند که مربع مقسوم علیه از عدد باقی‌مانده کوچکتر باشد
    # این یک بهینه‌سازی مهم برای افزایش سرعت است
    while مقسوم_علیه * مقسوم_علیه <= عدد_باقیمانده:
        while عدد_باقیمانده % مقسوم_علیه == 0:
            عوامل[مقسوم_علیه] = عوامل.get(مقسوم_علیه, 0) + 1
            عدد_باقیمانده //= مقسوم_علیه
        # فقط اعداد فرد را بررسی می‌کنیم (۳, ۵, ۷, ...)
        مقسوم_علیه += 2
        
    # اگر در نهایت چیزی از عدد باقی مانده بود (بزرگتر از ۲)،
    # به این معنی است که خود آن عدد باقی‌مانده یک عامل اول است
    if عدد_باقیمانده > 2:
        عوامل[عدد_باقیمانده] = عوامل.get(عدد_باقیمانده, 0) + 1
        
    return عوامل

def نمایش_تجزیه(n, عوامل):
    """
    این تابع نتیجه را در فرمت خواسته شده چاپ می‌کند.
    """
    if not عوامل: # اگر لیست عوامل خالی باشد (مثلاً برای عدد ۱)
        return str(n)
        
    قطعات_رشته = []
    # برای نمایش مرتب، کلیدهای دیکشنری (عوامل اول) را مرتب می‌کنیم
    for عامل in sorted(عوامل.keys()):
        توان = عوامل[عامل]
        if توان == 1:
            قطعات_رشته.append(str(عامل))
        else:
            قطعات_رشته.append(f"{عامل}^{توان}")
            
    return " * ".join(قطعات_رشته)

# --- نقطه شروع برنامه ---
if __name__ == "__main__":
    try:
        عدد_ورودی = int(input("عددی برای تجزیه به عوامل اول وارد کنید: "))

        if عدد_ورودی < 2:
            print("تجزیه به عوامل اول برای اعداد کوچکتر از ۲ تعریف نمی‌شود.")
        else:
            عوامل_اول = تجزیه_به_عوامل_اول(عدد_ورودی)
            نتیجه_نهایی = نمایش_تجزیه(عدد_ورودی, عوامل_اول)
            print(f"{عدد_ورودی} = {نتیجه_نهایی}")

    except ValueError:
        print("خطا: لطفاً فقط یک عدد صحیح وارد کنید.")